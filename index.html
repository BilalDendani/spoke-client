<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>spoke-client by psaylor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">spoke-client</h1>
      <h2 class="project-tagline">Spoke client-side library for audio and speech recognition</h2>
      <a href="https://github.com/psaylor/spoke-client" class="btn">View on GitHub</a>
      <a href="https://github.com/psaylor/spoke-client/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/psaylor/spoke-client/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="spoke-client" class="anchor" href="#spoke-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>spoke-client</h1>

<p>Spoke client-side library for speech recognition and audio tools</p>

<p>Spoke uses <a href="http://requirejs.org/">Require.js</a> to explicitly manage its module dependencies, and it uses <a href="https://github.com/jrburke/r.js">r.js</a> to build and optimize itself for production.
The built file <a href="./spoke.min.js">spoke.min.js</a> can be loaded into your own javascript code using Require.js. </p>

<h3>
<a id="a-word-about-requirejs" class="anchor" href="#a-word-about-requirejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>A word about Require.js</h3>

<p>Using Require.js for your own js project is highly recommended: it is great for explicitly listing your dependencies, and then it handles the asynchronous loading and execution of your file tree. It also handles smoothly configuring a fallback for third-party libraries you would normally load over CDN. Last but not least, with loader plugins you can also use it to require as dependencies non-Javascript assets, like text. This is especially helpful when using a templating library, since you might break up your page into many small html snippets that are reusable and that need to be loaded asynchronously onto your page. This text loader plugin can also be used with building and optimizing the Require.js code before deployment.</p>

<h2>
<a id="using-spoke-client-in-your-own-project" class="anchor" href="#using-spoke-client-in-your-own-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using spoke-client in your own project</h2>

<h3>
<a id="if-you-are-using-node-and-npm" class="anchor" href="#if-you-are-using-node-and-npm" aria-hidden="true"><span class="octicon octicon-link"></span></a>If you are using Node and npm</h3>

<div class="highlight highlight-sh"><pre>$ npm install spoke-client --save</pre></div>

<p>or <a href="https://docs.npmjs.com/files/package.json#github-urls">see how you can use github urls</a></p>

<div class="highlight highlight-sh"><pre>$ npm install --save psaylor/spoke-client</pre></div>

<p>This will install spoke-client under <code>node_modules/</code> and keep track of your dependency on this project in <code>package.json</code>.
The most recent javascript and css libraries are compiled and minified for you in the root of the project. The javascript library is currently only compatible with Require.js AMD module loading, so you should create your own <code>main.js</code> to load into your HTML and which will contain a dependency on the spoke client library (an example of this can be seen in test/). For example,</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!-- index.html --&gt;</span>
...
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>path/to/require.js<span class="pl-pds">"</span></span> <span class="pl-e">data-main</span>=<span class="pl-s"><span class="pl-pds">"</span>main.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
...</pre></div>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// main.js</span>
<span class="pl-c1">require</span>.config({
    paths<span class="pl-k">:</span> {
      <span class="pl-s"><span class="pl-pds">'</span>spoke<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>path/to/spoke.min<span class="pl-pds">'</span></span>,
    },
});

<span class="pl-c1">require</span>([<span class="pl-s"><span class="pl-pds">'</span>spoke<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>otherDep1<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>otherDep2<span class="pl-pds">'</span></span>], <span class="pl-k">function</span> (<span class="pl-smi">spoke</span>, <span class="pl-smi">dep1</span>, <span class="pl-smi">dep2</span>) {
  <span class="pl-c">/* Your js code using Spoke here */</span>
});</pre></div>

<p>Inside your main.js you can include Spoke in a few ways:</p>

<ul>
<li>reference the full path of its location, which is under the spoke-client module <code>your_project_dir/node_modules/spoke-client/spoke.min.js</code> (so you will probably have to go up a couple directories and then back down, and don't forget to take off .js for the require.config path)</li>
</ul>

<div class="highlight highlight-javascript"><pre>paths<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>spoke<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>../../node_modules/spoke-client/spoke.min<span class="pl-pds">'</span></span>,
},</pre></div>

<ul>
<li>Copy it into the same directory as your <code>main.js</code>, so then the path you configure could just be a shortened name</li>
</ul>

<div class="highlight highlight-javascript"><pre>paths<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>spoke<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./spoke.min<span class="pl-pds">'</span></span>,
},</pre></div>

<ul>
<li>(PREFERRED) Softlink it into the same directory as your <code>main.js</code>, so when you update spoke-client, the softlink automatically gets updated.</li>
</ul>

<div class="highlight highlight-bash"><pre>$ <span class="pl-c1">cd</span> my_javascript_dir
$ ls
main.js (and other stuff)
<span class="pl-c"># change the relative path as necessary</span>
$ ln -s ../../node_modules/spoke-client/spoke.min.js ./spoke.min.js</pre></div>

<div class="highlight highlight-javascript"><pre>paths<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>spoke<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./spoke.min<span class="pl-pds">'</span></span>,
},</pre></div>

<h2>
<a id="developing-on-this-library" class="anchor" href="#developing-on-this-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developing on this library</h2>

<p>You should have Node and npm installed already to start development. Then you can install the requirejs project through npm, either following <a href="http://requirejs.org/docs/optimization.html">their own guide</a> or the short version of it here:
Setup requirejs globally so the r.js optimizer will be on your path automatically</p>

<pre><code>$ npm install -g requirejs
</code></pre>

<p>or</p>

<pre><code>$ sudo npm install -g requirejs
</code></pre>

<p>Or install it locally under your current project working directory</p>

<pre><code>$ npm install requirejs
</code></pre>

<p>Now you will find r.js located at project_dir/node_modules/requirejs/bin/r.js</p>

<p>After you make changes and are ready to commit a new version, you should run all the builds to provide ready-to-go code to other developers:</p>

<pre><code>$ cd spoke-client/
$ r.js -o buildSpoke.js 

Tracing dependencies for: spoke
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/spoke.min.js

/Users/patriciasaylor/Documents/code/spoke-client/spoke.min.js
----------------
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/third-party/socket.io-stream.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/clientSocket.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/crossBrowserAudio.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/sharedAudio.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/utils.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/microphone.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/player.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/recognizer.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/recorder.js
/Users/patriciasaylor/Documents/code/spoke-client/lib/js/spoke.js
</code></pre>

<pre><code>$ cd spoke-client
$ r.js -o buildCss.js

/Users/patriciasaylor/Documents/code/spoke-client/spoke.min.css
----------------
/Users/patriciasaylor/Documents/code/spoke-client/lib/css/general.css
/Users/patriciasaylor/Documents/code/spoke-client/lib/css/micIcon.css
/Users/patriciasaylor/Documents/code/spoke-client/lib/css/spoke.css
</code></pre>

<pre><code>$ cd spoke-client
$  r.js -o buildAll.js 
Optimizing (standard) CSS file: /Users/patriciasaylor/Documents/code/spoke-client/build/css/general.css
Optimizing (standard) CSS file: /Users/patriciasaylor/Documents/code/spoke-client/build/css/micIcon.css
Optimizing (standard) CSS file: /Users/patriciasaylor/Documents/code/spoke-client/build/css/spoke.css
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/clientSocket.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/crossBrowserAudio.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/microphone.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/player.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/recognizer.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/recorder.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/sharedAudio.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/spoke.js
Uglifying file: /Users/patriciasaylor/Documents/code/spoke-client/build/js/utils.js

css/general.css
----------------
css/general.css

css/micIcon.css
----------------
css/micIcon.css

css/spoke.css
----------------
css/general.css
css/micIcon.css
css/spoke.css
</code></pre>

<p>All of these build options can be overriden by command line params. Putting them in a build profile saves the headache with command line params every time. </p>

<p>Also note that for spoke.js, the module loader needs to be <code>define</code> not <code>require</code> in order for that module to return references to all the other modules. Otherwise, with <code>require</code> it returns undefined.</p>

<h3>
<a id="notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes</h3>

<p>These guides were useful for making a standalone library using Requirejs,</p>

<ul>
<li>
<a href="http://spadgos.github.io/blog/2013/10/19/using-requirejs-and-make-for-standalone-libraries/">http://spadgos.github.io/blog/2013/10/19/using-requirejs-and-make-for-standalone-libraries/</a>
though it takes the route of pre-compiling all the dependencies into one file
and then loading it using almond (a 1KB subset of the requirejs API that only
works for pre-compiled optimized require.js file)</li>
<li><a href="http://tech.pro/blog/1639/using-rjs-to-optimize-your-requirejs-project">http://tech.pro/blog/1639/using-rjs-to-optimize-your-requirejs-project</a></li>
<li><a href="http://orizens.com/wp/topics/requirejs-optimizing-and-building-one-file/">http://orizens.com/wp/topics/requirejs-optimizing-and-building-one-file/</a></li>
<li><a href="http://www.sitepoint.com/building-library-with-requirejs/">http://www.sitepoint.com/building-library-with-requirejs/</a></li>
<li>Loading css? <a href="http://requirejs.org/docs/faq-advanced.html#css">http://requirejs.org/docs/faq-advanced.html#css</a>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/psaylor/spoke-client">spoke-client</a> is maintained by <a href="https://github.com/psaylor">psaylor</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

